(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9db081a8"],{"31e6":function(t,a,e){},9504:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("index",{attrs:{post_type:"edit"}})},r=[],o=e("dab6"),i={components:{Index:o["a"]}},l=i,n=e("2877"),d=Object(n["a"])(l,s,r,!1,null,null,null);a["default"]=d.exports},ae91:function(t,a,e){"use strict";var s=e("31e6"),r=e.n(s);r.a},c24f:function(t,a,e){"use strict";e.d(a,"e",(function(){return o})),e.d(a,"d",(function(){return i})),e.d(a,"f",(function(){return l})),e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return d})),e.d(a,"g",(function(){return p})),e.d(a,"c",(function(){return c}));var s=e("365c"),r=e("b775");function o(t){return Object(r["b"])({url:s["a"].User,method:"get",params:t})}function i(t){return Object(r["b"])({url:s["a"].User+"".concat(t,"/"),method:"get"})}function l(t,a){return Object(r["b"])({url:s["a"].ResetPassword(t),method:"post",data:a})}function n(t){return Object(r["b"])({url:s["a"].ChangePassword,method:"post",data:t})}function d(t){return Object(r["b"])({url:s["a"].User,method:"post",data:t}).then(s["e"]).catch(s["d"])}function p(t,a){return Object(r["b"])({url:s["a"].User+"".concat(t,"/"),method:"patch",data:a}).then(s["i"]).catch(s["h"])}function c(t,a){return Object(r["b"])({url:s["a"].User+"".concat(t,"/"),method:"delete"}).then(s["g"]).catch(s["f"])}},dab6:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("page-header-wrapper",[e("form-validate",{ref:"observer"},["edit"==t.post_type?[e("a-card",{staticClass:"card",attrs:{title:"Base Information",bordered:!1}},[e("a-row",{staticClass:"form-row",attrs:{gutter:16}},[e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Email",vid:"Email"}},[e("a-input",{attrs:{disabled:""},model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}})],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Password",vid:"password"}},[e("a-input",{attrs:{disabled:""},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}},[e("a-icon",{directives:[{name:"action",rawName:"v-action:reset_password",arg:"reset_password"}],attrs:{slot:"addonAfter",type:"lock"},on:{click:function(){t.$refs.modal.setVisible(!0)}},slot:"addonAfter"})],1)],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"First Name",vid:"first_name"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.first_name,callback:function(a){t.$set(t.form,"first_name",a)},expression:"form.first_name"}})],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Last Name",vid:"last_name"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.last_name,callback:function(a){t.$set(t.form,"last_name",a)},expression:"form.last_name"}})],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Department",vid:"department_id"}},[e("a-select",{attrs:{allowClear:!0,disabled:!t.$auth("change_user")},on:{change:t.onDepartmentChange},model:{value:t.form.department_id,callback:function(a){t.$set(t.form,"department_id",a)},expression:"form.department_id"}},t._l(t.extra.department,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Role",vid:"role_id"}},[e("a-select",{attrs:{allowClear:!0,mode:"multiple",disabled:!(t.$auth("assign_role")&&t.$auth("change_user"))},on:{change:t.onRoleChange},model:{value:t.form.groups_id,callback:function(a){t.$set(t.form,"groups_id",a)},expression:"form.groups_id"}},t._l(t.extra.role,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Active",vid:"is_active",help:"Whether the account is available"}},[e("a-checkbox",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.is_active,callback:function(a){t.$set(t.form,"is_active",a)},expression:"form.is_active"}})],1)],1),e("a-col",{attrs:{lg:12,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Staff",vid:"is_staff",help:"Used to log in to the back-end website"}},[e("a-checkbox",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.is_staff,callback:function(a){t.$set(t.form,"is_staff",a)},expression:"form.is_staff"}})],1)],1)],1)],1),e("a-card",{staticClass:"card",attrs:{title:"Passport",bordered:!1}},[e("a-row",{staticClass:"form-row",attrs:{gutter:16}},[e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Type",vid:"possport_type"}},[e("a-input",{attrs:{maxLength:4,disabled:!t.$auth("change_user")},model:{value:t.form.possport_type,callback:function(a){t.$set(t.form,"possport_type",a)},expression:"form.possport_type"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Code",vid:"passport_code"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_code,callback:function(a){t.$set(t.form,"passport_code",a)},expression:"form.passport_code"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"No.",vid:"passport_no"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_no,callback:function(a){t.$set(t.form,"passport_no",a)},expression:"form.passport_no"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Sex",vid:"passport_sex"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_sex,callback:function(a){t.$set(t.form,"passport_sex",a)},expression:"form.passport_sex"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Nationality",vid:"passport_nationality"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_nationality,callback:function(a){t.$set(t.form,"passport_nationality",a)},expression:"form.passport_nationality"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Date of birth",vid:"passport_date_birth"}},[e("a-date-picker",{staticClass:"w-full",attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_date_birth,callback:function(a){t.$set(t.form,"passport_date_birth",a)},expression:"form.passport_date_birth"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Date of issue",vid:"passport_date_issue"}},[e("a-date-picker",{staticClass:"w-full",attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_date_issue,callback:function(a){t.$set(t.form,"passport_date_issue",a)},expression:"form.passport_date_issue"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Date of expiry",vid:"passport_date_expiry"}},[e("a-date-picker",{staticClass:"w-full",attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_date_expiry,callback:function(a){t.$set(t.form,"passport_date_expiry",a)},expression:"form.passport_date_expiry"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Place of birth",vid:"passport_place_birth"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_place_birth,callback:function(a){t.$set(t.form,"passport_place_birth",a)},expression:"form.passport_place_birth"}})],1)],1),e("a-col",{attrs:{lg:6,md:12,sm:24}},[e("form-item-validate",{attrs:{label:"Issuing authority",vid:"passport_issuing_authority"}},[e("a-input",{attrs:{disabled:!t.$auth("change_user")},model:{value:t.form.passport_issuing_authority,callback:function(a){t.$set(t.form,"passport_issuing_authority",a)},expression:"form.passport_issuing_authority"}})],1)],1)],1)],1),e("a-row",[e("a-col",{attrs:{span:12}},[t.$auth("delete_user")?e("a-popconfirm",{attrs:{title:"Are you sure delete?",okText:"Yes",cancelText:"No"},on:{confirm:t.onDelete}},[e("a-button",{attrs:{href:"javascript:;",type:"danger"}},[t._v("Delete")])],1):t._e()],1),e("a-col",{staticClass:"text-right",attrs:{span:12}},[e("a-button",{directives:[{name:"action",rawName:"v-action:change_user",arg:"change_user"}],attrs:{type:"primary",loading:t.updateing,"html-type":"submit"},on:{click:t.submit}},[t._v(" Submit ")])],1)],1)]:t._e(),"add"==t.post_type?[e("a-card",{staticClass:"card",attrs:{title:"Authorization",bordered:!1}},[e("form-item-validate",{attrs:{label:"Email",vid:"email"}},[e("a-input",{model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}})],1),e("form-item-validate",{attrs:{label:"Password",vid:"password1"}},[e("a-input-password",{model:{value:t.form.password1,callback:function(a){t.$set(t.form,"password1",a)},expression:"form.password1"}})],1),e("form-item-validate",{attrs:{label:"Repeat Password",vid:"password2"}},[e("a-input-password",{model:{value:t.form.password2,callback:function(a){t.$set(t.form,"password2",a)},expression:"form.password2"}})],1)],1),e("a-row",[e("a-col",{staticClass:"text-right",attrs:{span:24}},[e("a-button",{directives:[{name:"action",rawName:"v-action:add_user",arg:"add_user"}],attrs:{type:"primary",loading:t.updateing,"html-type":"submit"},on:{click:t.submit}},[t._v(" Submit ")])],1)],1)]:t._e()],2),e("reset-password",{ref:"modal",attrs:{title:"Rest Password"}})],1)},r=[],o=(e("d3b7"),e("ac1f"),e("5319"),e("2af9")),i=e("c24f"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{attrs:{title:"Rest Password",confirmLoading:t.loading},on:{ok:t.submit},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[e("form-validate",{ref:"password"},[e("form-item-validate",{attrs:{label:"New Password",vid:"password"}},[e("a-input-password",{attrs:{placeholder:"Password",type:"submit"},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}})],1)],1)],1)},n=[],d={components:{FormValidate:o["c"],FormItemValidate:o["b"]},data:function(){return{form:{},loading:!1,visible:!1}},methods:{submit:function(){var t=this;this.loading=!0,Object(i["f"])(this.$route.params.id,this.form).then((function(a){t.setVisible(!1)})).catch((function(a){a.response&&t.$refs.password.setErrors(a)})).finally((function(){t.loading=!1}))},setVisible:function(t){var a=this;this.visible=t,this.visible&&(this.form={},this.$nextTick((function(){a.$refs.password.reset()})))}}},p=d,c=e("2877"),u=Object(c["a"])(p,l,n,!1,null,null,null),m=u.exports,f=e("c1df"),_=e.n(f),b={components:{FormValidate:o["c"],FormItemValidate:o["b"],ResetPassword:m},props:{post_type:{type:String,default:"edit"}},data:function(){return{loading:!1,updateing:!1,form:{passport_date_birth:null,passport_date_issue:null,passport_date_expiry:null},extra:{}}},mounted:function(){"edit"==this.post_type&&this.getUserData()},methods:{onDepartmentChange:function(t){this.form.department_id=t||null},onRoleChange:function(t){this.form.groups_id=t||null},getUserData:function(){var t=this;this.loading=!0,Object(i["d"])(this.$route.params.id).then((function(a){var e=a.result,s=e.data,r=e.extra;t.form=Object.assign(s,{passport_date_birth:null!=s.passport_date_birth?_()(s.passport_date_birth,"YYYY-MM-DD"):null,passport_date_issue:null!=s.passport_date_issue?_()(s.passport_date_issue,"YYYY-MM-DD"):null,passport_date_expiry:null!=s.passport_date_expiry?_()(s.passport_date_expiry,"YYYY-MM-DD"):null}),t.extra=Object.assign({},r)})).finally((function(){t.loading=!1}))},submit:function(){var t=this;if(this.updateing=!0,"edit"==this.post_type){var a=Object.assign({},this.form,{passport_date_birth:null!=this.form.passport_date_birth?_()(this.form.passport_date_birth).format("YYYY-MM-DD"):null,passport_date_issue:null!=this.form.passport_date_issue?_()(this.form.passport_date_issue).format("YYYY-MM-DD"):null,passport_date_expiry:null!=this.form.passport_date_expiry?_()(this.form.passport_date_expiry).format("YYYY-MM-DD"):null,avatar:void 0});Object(i["g"])(this.$route.params.id,a).then((function(a){var e=a.result,s=e.data,r=e.extra;t.form=Object.assign({},s,{passport_date_birth:null!=s.passport_date_birth?_()(s.passport_date_birth,"YYYY-MM-DD"):null,passport_date_issue:null!=s.passport_date_issue?_()(s.passport_date_issue,"YYYY-MM-DD"):null,passport_date_expiry:null!=s.passport_date_expiry?_()(s.passport_date_expiry,"YYYY-MM-DD"):null}),t.extra=r})).catch((function(a){a.response&&t.$refs.observer.setErrors(a)})).finally((function(){t.updateing=!1}))}else"add"==this.post_type&&Object(i["b"])({email:this.form.email,password1:this.form.password1,password2:this.form.password2}).then((function(a){t.$router.replace({name:"UserDetail",params:{id:a.result.user.id}})})).catch((function(a){a.response&&t.$refs.observer.setErrors(a)})).finally((function(){t.updateing=!1}))},onDelete:function(){var t=this;this.updateing=!0,Object(i["c"])(this.$route.params.id).then((function(){t.$router.go(-1)})).finally((function(){t.updateing=!1}))}}},h=b,v=(e("ae91"),Object(c["a"])(h,s,r,!1,null,"44d37c51",null));a["a"]=v.exports}}]);