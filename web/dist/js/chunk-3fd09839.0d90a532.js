(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fd09839"],{"38a9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Welcome "+t._s(t.timeFix)+" ")]},proxy:!0},{key:"content",fn:function(){return[a("div",{staticClass:"page-header-content"},[a("a-avatar",{attrs:{size:"large",icon:"user",src:t.currentUser.avatar.thumbnail,alt:"center"}}),a("div",{staticClass:"content"},[a("div",{staticClass:"content-title"},[t._v(t._s(t.user.name))]),a("span",[t._v(t._s(t.user.department))])])],1)]},proxy:!0}])},[a("div",[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{xl:16,lg:24,md:24,sm:24,xs:24}},[a("a-card",{attrs:{loading:t.loading,title:"Messages",bordered:!1,"tab-list":t.tabList},on:{tabChange:function(e){"today"==e?t.today():"yesterday"==e?t.yesterday():t.week()}}},[a("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:{pageSize:10},"data-source":t.messages},scopedSlots:t._u([{key:"renderItem",fn:function(e,s){return a("a-list-item",{key:s},[a("a-list-item-meta",[a("div",{attrs:{slot:"title"},slot:"title"},["Booking"==e.json["model"]?[a("span",[t._v(t._s(e.json["history_user"])+" ")]),a("span",[t._v(t._s(t.actionString[e.json["history_type"]]))]),"-"==e.json["history_type"]?a("router-link",{attrs:{to:{name:"BookingHistory",params:{id:e.json["id"]}}}},[t._v(" Booking for ID:"+t._s(e.json["id"])+" ")]):a("router-link",{attrs:{to:{name:"BookingDetail",params:{id:e.json["id"]}}}},[t._v(" Booking for ID:"+t._s(e.json["id"])+" ")]),e.read?t._e():a("a-icon",{attrs:{type:"inbox"}})]:t._e(),"Ticket"==e.json["model"]?[a("span",[t._v(t._s(e.json["history_user"])+" ")]),a("span",[t._v(t._s(t.actionString[e.json["history_type"]]))]),"-"==e.json["history_type"]?a("router-link",{attrs:{to:{name:"TicketHistory",params:{id:e.json["id"]}}}},[t._v(" Ticket for ID:"+t._s(e.json["id"])+" ")]):a("router-link",{attrs:{to:{name:"TicketDetail",params:{id:e.json["id"]}}}},[t._v(" Ticket for ID:"+t._s(e.json["id"])+" ")]),e.read?t._e():a("a-icon",{attrs:{type:"inbox"}})]:t._e(),"Itinerary"==e.json["model"]?[a("span",[t._v(t._s(e.json["history_user"])+" ")]),a("span",[t._v(t._s(t.actionString[e.json["history_type"]]))]),"-"==e.json["history_type"]?a("router-link",{attrs:{to:{name:"ItineraryHistory",params:{id:e.json["booking"]}}}},[t._v(" Itinerary for ID:"+t._s(e.json["id"])+" ")]):a("router-link",{attrs:{to:{name:"BookingDetail",params:{id:e.json["booking"]}}}},[t._v(" Itinerary for ID:"+t._s(e.json["id"])+" ")]),e.read?t._e():a("a-icon",{attrs:{type:"inbox"}})]:t._e(),"Comment"==e.json["model"]?[a("router-link",{attrs:{to:{name:"TicketDetail",params:{id:e.json["id"]}}}},[a("span",[t._v(t._s(e.json["message"])+" ")])]),e.read?t._e():a("a-icon",{attrs:{type:"inbox"}})]:t._e()],2),a("div",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(t._f("moment")(e.date)))])])],1)}}])})],1)],1),a("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:8,lg:24,md:24,sm:24,xs:24}},[a("a-card",{staticStyle:{"margin-bottom":"24px"},attrs:{title:"Navigation",bordered:!1,"body-style":{padding:0}}},[a("div",{staticClass:"item-group"},[a("router-link",{directives:[{name:"action",rawName:"v-action:view_booking",arg:"view_booking"}],attrs:{to:{name:"AllBookings"}}},[t._v(" Bookings ")]),a("router-link",{directives:[{name:"action",rawName:"v-action:view_itinerary",arg:"view_itinerary"}],attrs:{to:{name:"AllItineraries"}}},[t._v(" Itineraries ")]),a("router-link",{directives:[{name:"action",rawName:"v-action:view_ticket",arg:"view_ticket"}],attrs:{to:{name:"AllTickets"}}},[t._v(" Tickets ")]),a("router-link",{directives:[{name:"action",rawName:"v-action:view_user",arg:"view_user"}],attrs:{to:{name:"AllUsers"}}},[t._v(" Users ")])],1)])],1)],1)],1)])},n=[],r=(a("d3b7"),a("5530")),i=a("ca00"),o=a("5880"),c=a("365c"),d=a("b775");function u(t){return Object(d["b"])({url:c["a"].Message,method:"get",params:t})}var l=a("c1df"),m=a.n(l),_={"+":"Added","~":"Changed","-":"Deleted"},y={name:"Welcome",components:{},data:function(){return{actionString:_,timeFix:Object(i["a"])(),avatar:"",user:{},queryParams:{},tabList:[{key:"today",tab:"Today"},{key:"yesterday",tab:"Yesterday"},{key:"last_week",tab:"Last Week"}],loading:!0,messages:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["mapState"])({currentUser:function(t){return t.user.info},welcome:function(t){return t.user.welcome}})),{},{userInfo:function(){return this.$store.getters.userInfo}}),created:function(){this.user=this.userInfo,this.avatar=this.userInfo.avatar},mounted:function(){this.today()},methods:{today:function(){return this.getMessageData({date:m()().format("YYYY-MM-DD")})},yesterday:function(){return this.getMessageData({date:m()().add(-1,"days").format("YYYY-MM-DD")})},week:function(){return this.getMessageData({week_after:m()().add(-7,"days").format("YYYY-MM-DD"),week_before:m()().format("YYYY-MM-DD")})},getMessageData:function(t){var e=this;this.loading=!0,u(t).then((function(t){e.messages=Object.assign([],t.result)})).finally((function(){return e.loading=!1}))}}},g=y,v=(a("6fcb"),a("2877")),p=Object(v["a"])(g,s,n,!1,null,"9c045372",null);e["default"]=p.exports},"55b5":function(t,e,a){},"6fcb":function(t,e,a){"use strict";var s=a("55b5"),n=a.n(s);n.a},ca00:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("c975");function s(){var t=new Date,e=t.getHours();return e<9?"早上好":e<=11?"上午好":e<=13?"中午好":e<20?"下午好":"晚上好"}}}]);